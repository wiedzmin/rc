- hosts: localhost

  tasks:

    - name: accompanying tools | shepherd | generate openrc entry
      template: src=../templates/shepherd.openrc dest=./shepherd.openrc.entry

    - name: accompanying tools | shepherd | install openrc entry
      copy: src=shepherd.openrc.entry dest=/etc/init.d/shepherd mode=0755
      become: true

    - name: accompanying tools | shepherd | restart service
      service: name=shepherd state=restarted
      become: true

    - name: accompanying tools | shepherd | openrc cleanup
      file: path=shepherd.openrc.entry state=absent

    - name: sshuttle | generate openrc entry
      template: src=../templates/sshuttle.openrc dest=./sshuttle.openrc.entry

    - name: sshuttle | install openrc entry
      copy: src=sshuttle.openrc.entry dest=/etc/init.d/sshuttle mode=0755
      become: true

    - name: sshuttle | restart service
      service: name=sshuttle state=restarted
      become: true

    - name: sshuttle | openrc cleanup
      file: path=sshuttle.openrc.entry state=absent
